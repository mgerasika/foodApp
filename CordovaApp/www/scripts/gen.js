/* Generated by SharpKit 5 v5.5.0 */
if (typeof ($Inherit) == 'undefined') {
	var $Inherit = function (ce, ce2) {

		if (typeof (Object.getOwnPropertyNames) == 'undefined') {

			for (var p in ce2.prototype)
				if (typeof (ce.prototype[p]) == 'undefined' || ce.prototype[p] == Object.prototype[p])
					ce.prototype[p] = ce2.prototype[p];
			for (var p in ce2)
				if (typeof (ce[p]) == 'undefined')
					ce[p] = ce2[p];
			ce.$baseCtor = ce2;

		} else {

			var props = Object.getOwnPropertyNames(ce2.prototype);
			for (var i = 0; i < props.length; i++)
				if (typeof (Object.getOwnPropertyDescriptor(ce.prototype, props[i])) == 'undefined')
					Object.defineProperty(ce.prototype, props[i], Object.getOwnPropertyDescriptor(ce2.prototype, props[i]));

			for (var p in ce2)
				if (typeof (ce[p]) == 'undefined')
					ce[p] = ce2[p];
			ce.$baseCtor = ce2;

		}

	}
};

if (typeof ($CreateAnonymousDelegate) == 'undefined') {
    var $CreateAnonymousDelegate = function (target, func) {
        if (target == null || func == null)
            return func;
        var delegate = function () {
            return func.apply(target, arguments);
        };
        delegate.func = func;
        delegate.target = target;
        delegate.isDelegate = true;
        return delegate;
    }
}


/* Generated by SharpKit 5 v5.5.0 */
if (typeof ($CreateAnonymousDelegate) == 'undefined') {
    var $CreateAnonymousDelegate = function (target, func) {
        if (target == null || func == null)
            return func;
        var delegate = function () {
            return func.apply(target, arguments);
        };
        delegate.func = func;
        delegate.target = target;
        delegate.isDelegate = true;
        return delegate;
    }
}


var angularUtils = function (){
    this._controllers =  [];
    this._directives =  [];
    this._filters =  [];
    this.module = null;
};
angularUtils.c_sModuleName = "StudyLogApiApp";
angularUtils.inst = new angularUtils();
angularUtils.prototype.registerControllerType = function (controller){
    this._controllers.push(controller);
};
angularUtils.prototype.registerDirectiveType = function (directive){
    this._directives.push(directive);
};
angularUtils.prototype.registerFilterType = function (filter){
    this._filters.push(filter);
};
angularUtils.prototype.linkControllerWithAngularJs = function (angularController){
    var func1 = new Function("$scope", "$http", "$location", "$filter", "var cstype = \'" + angularController.get_namespace() + "." + angularController.get_className() + "\';" + "angularUtils.inst.createController(cstype,$scope,$http,$location,$filter);");
    var str = "StudyLogApiApp.controller(\'" + angularController.get_className() + "\',func1);";
    eval(str);
};
angularUtils.prototype.createController = function (jstype, scope, http, loc, filter){
    var type = this.getJsType(jstype);
    var obj = null;
    if (type["inst"] != null){
        obj = type["inst"];
    }
    else {
        obj = this.createInstance(jstype);
    }
    var ctrl = obj;
    ctrl.init(scope, http, loc, filter);
};
angularUtils.prototype.getJsType = function (cstype){
    var arr = cstype.split(".");
    var res = window;
    for (var i = 0; i < arr.length; ++i){
        var key = arr[i];
        var tmpObj = res[key];
        res = tmpObj;
    }
    return res;
};
angularUtils.prototype.linkDirectiveWithAngularJs = function (directive){
    var module = window["StudyLogApiApp"];
    module.directive(directive.get_attrName(), $CreateAnonymousDelegate(this, function (){
        var obj = this.createInstance(directive.get_namespace() + "." + directive.get_className());
        obj.initDirectiveInternal();
        return obj;
    }));
};
angularUtils.prototype.linkFilterWithAngularJs = function (filter){
    var module = window["StudyLogApiApp"];
    module.filter(filter.get_filterName(), $CreateAnonymousDelegate(this, function (){
        var obj = this.createInstance(filter.get_namespace() + "." + filter.get_className());
        var fn = obj["filter"];
        return fn;
    }));
};
angularUtils.prototype.createInstance = function (cstype){
    var obj = "var obj = new " + cstype + "()";
    try{
        eval(obj);
    }
    catch(ex){
        obj = null;
    }
    return obj;
};
angularUtils.prototype.before = function (){
    this.module = angular.module("StudyLogApiApp",  []);
    window["StudyLogApiApp"] = this.module;
};
angularUtils.prototype.after = function (){
    for (var i = 0; i < this._controllers.length; ++i){
        this.linkControllerWithAngularJs(this._controllers[i]);
    }
    for (var i = 0; i < this._directives.length; ++i){
        this.linkDirectiveWithAngularJs(this._directives[i]);
    }
    for (var i = 0; i < this._filters.length; ++i){
        this.linkFilterWithAngularJs(this._filters[i]);
    }
    angularUtils.addFilter();
};
angularUtils.addFilter = function (){
    eval("StudyLogApiApp.filter(\'rawHtml\', [\'$sce\', function($sce){return function(val) {return $sce.trustAsHtml(val);};}]);");
};
if (typeof(angularjs) == "undefined")
    var angularjs = {};
angularjs.ProgramBefore = function (){
};
angularUtils.inst.before();
angularjs.angularController = function (){
    this._scope = null;
    this._http = null;
    this._location = null;
    this.Filter = null;
    angularUtils.inst.registerControllerType(this);
};
angularjs.angularController.prototype.get__model = function (){
    var scope = this._scope instanceof Object ? this._scope : null;
    var obj = scope["model"];
    return obj;
};
angularjs.angularController.prototype.set__model = function (value){
    var scope = this._scope instanceof Object ? this._scope : null;
    scope["model"] = value;
};
angularjs.angularController.prototype.init = function (scope, http, loc, filter){
    this._scope = scope;
    this._http = http;
    this._location = loc;
    this.Filter = filter;
    var copy = this;
    for (var key in copy){
        scope[key] = copy[key];
    }
};
angularjs.angularDirective = function (){
    this._attrs = null;
    this._element = null;
    this._scope = null;
};
angularjs.angularDirective.prototype.get_restrict = function (){
    return "A";
};
angularjs.angularDirective.prototype.get_getScope = function (){
    return true;
};
angularjs.angularDirective.prototype.get_attrName = function (){
    var res;
    if (this.get_className() != null){
        res = this.get_className().toLowerCase();
    }
    else {
        res = this.get_className().toLowerCase();
    }
    return res;
};
angularjs.angularDirective.prototype.template = function (element, attrs){
    var res = $("#" + this.getTemplateId()).html();
    return res;
};
angularjs.angularDirective.prototype.getTemplateId = function (){
    return "_id" + this.get_className();
};
angularjs.angularDirective.prototype.initDirectiveInternal = function (){
    var self = this;
    self["restrict"] = this.get_restrict();
    self["scope"] = this.get_getScope();
};
angularjs.angularDirective.prototype.init = function (s, element, attrs){
    this._scope = s;
    this._element = element;
    this._attrs = attrs;
};
angularjs.angularDirective.prototype.link = function (s, element, attrs){
    var cstype = attrs["cstype"];
    var obj = angularUtils.inst.createInstance(cstype);
    obj.init(s, element, attrs);
};


/* Generated by SharpKit 5 v5.5.0 */
if (typeof ($Inherit) == 'undefined') {
	var $Inherit = function (ce, ce2) {

		if (typeof (Object.getOwnPropertyNames) == 'undefined') {

			for (var p in ce2.prototype)
				if (typeof (ce.prototype[p]) == 'undefined' || ce.prototype[p] == Object.prototype[p])
					ce.prototype[p] = ce2.prototype[p];
			for (var p in ce2)
				if (typeof (ce[p]) == 'undefined')
					ce[p] = ce2[p];
			ce.$baseCtor = ce2;

		} else {

			var props = Object.getOwnPropertyNames(ce2.prototype);
			for (var i = 0; i < props.length; i++)
				if (typeof (Object.getOwnPropertyDescriptor(ce.prototype, props[i])) == 'undefined')
					Object.defineProperty(ce.prototype, props[i], Object.getOwnPropertyDescriptor(ce2.prototype, props[i]));

			for (var p in ce2)
				if (typeof (ce[p]) == 'undefined')
					ce[p] = ce2[p];
			ce.$baseCtor = ce2;

		}

	}
};

if (typeof ($CreateAnonymousDelegate) == 'undefined') {
    var $CreateAnonymousDelegate = function (target, func) {
        if (target == null || func == null)
            return func;
        var delegate = function () {
            return func.apply(target, arguments);
        };
        delegate.func = func;
        delegate.target = target;
        delegate.isDelegate = true;
        return delegate;
    }
}


if (typeof(FoodApp) == "undefined")
    var FoodApp = {};
if (typeof(FoodApp.Common) == "undefined")
    FoodApp.Common = {};
FoodApp.Common.jsUtils = function (){
};
FoodApp.Common.jsUtils.inst = new FoodApp.Common.jsUtils();
FoodApp.Common.jsUtils.prototype.getLocation = function (){
    var name = document.location.protocol + "//" + document.location.host;
    return name;
};
FoodApp.Common.jsUtils.prototype.showLoading = function (){
    var loadingEl = document.getElementById("loadingDiv") instanceof HTMLElement ? document.getElementById("loadingDiv") : null;
    loadingEl.style.display = "block";
};
FoodApp.Common.jsUtils.prototype.hideLoading = function (){
    window.setTimeout($CreateAnonymousDelegate(this, function (){
        var loadingEl = document.getElementById("loadingDiv") instanceof HTMLElement ? document.getElementById("loadingDiv") : null;
        loadingEl.style.display = "none";
    }), 200);
};
FoodApp.Common.jsUtils.prototype.getSelectedText = function (wnd){
    var text = "";
    if (wnd["getSelection"] != null){
        text = wnd.getSelection().toString();
    }
    else {
        var selection = wnd.document["selection"];
        if (selection != null && (selection["type"] != "Control")){
            var fn = selection["createRange"];
            text = fn.call()["text"];
        }
    }
    return text;
};
FoodApp.Common.jsUtils.prototype.isEmpty = function (str){
    return (null == str) || (undefined == str) || ("" == str) || ("null" == str);
};
FoodApp.Common.jsUtils.prototype.Contains = function (ngCategories, p){
    var res = false;
    for (var $i2 = 0,$l2 = ngCategories.length,str = ngCategories[$i2]; $i2 < $l2; $i2++, str = ngCategories[$i2]){
        if (str == p){
            res = true;
            break;
        }
    }
    return res;
};
FoodApp.Common.jsUtils.prototype.fixNumber = function (p){
    var jsNumber = parseFloat(p);
    var tmp = jsNumber.toPrecision(5);
    return parseFloat(tmp);
};
FoodApp.Common.eventManager = function (){
    this._dict = new Object();
};
FoodApp.Common.eventManager.settingsLoaded = "settingsLoaded";
FoodApp.Common.eventManager.deviceReady = "deviceReady";
FoodApp.Common.eventManager.orderCompleted = "orderCompleted";
FoodApp.Common.eventManager.orderListChanged = "orderListChanged";
FoodApp.Common.eventManager.inst = new FoodApp.Common.eventManager();
FoodApp.Common.eventManager.prototype.GetHandlersByName = function (name){
    if (this._dict[name] == null){
        this._dict[name] =  [];
    }
    return this._dict[name];
};
FoodApp.Common.eventManager.prototype.subscribe = function (eventName, action){
    var array = this.GetHandlersByName(eventName);
    array.push(action);
};
FoodApp.Common.eventManager.prototype.fire = function (name, arg){
    var array = this.GetHandlersByName(name);
    for (var $i3 = 0,$l3 = array.length,obj = array[$i3]; $i3 < $l3; $i3++, obj = array[$i3]){
        var action = obj;
        action(arg);
    }
};
FoodApp.Common.ngModelBase = function (){
};
FoodApp.Common.ngFoodItem = function (){
    this.Name = null;
    this.Description = null;
    this.Category = null;
    this.Price = 0;
    this.FoodId = null;
    this.IsByWeightItem = false;
    this.isContainer = false;
    this.isSmallContainer = false;
    this.isBigContainer = false;
    this.isSalat = false;
    this.isGarnir = false;
    this.isMeatOrFish = false;
    this.isFirst = false;
    this.isKvasolevaOrChanachi = false;
};
$Inherit(FoodApp.Common.ngFoodItem, FoodApp.Common.ngModelBase);
FoodApp.Common.ngFoodRate = function (){
    this.FoodId = null;
    this.Rate = 0;
};
$Inherit(FoodApp.Common.ngFoodRate, FoodApp.Common.ngModelBase);
FoodApp.Common.ngHistoryEntry = function (){
    this.FoodId = null;
    this.Date = System.DateTime.MinValue;
    this.Count = 0;
    this.FoodPrice = 0;
};
$Inherit(FoodApp.Common.ngHistoryEntry, FoodApp.Common.ngModelBase);
FoodApp.Common.ngHistoryGroupEntry = function (){
    this.DateStr = null;
    this.Entries = null;
    this.Entries = new System.Collections.Generic.List$1.ctor("FoodApp.Common.ngHistoryEntry");
};
$Inherit(FoodApp.Common.ngHistoryGroupEntry, FoodApp.Common.ngModelBase);
FoodApp.Common.ngOrderEntry = function (){
    this.FoodId = null;
    this.Count = 0;
    this.FoodPrice = 0;
};
$Inherit(FoodApp.Common.ngOrderEntry, FoodApp.Common.ngModelBase);
FoodApp.Common.ngUserModel = function (){
    this.Column = 0;
    this.Email = null;
    this.Name = null;
    this.Id = null;
    this.Picture = null;
    this.GoogleName = null;
    this.IsAdmin = false;
    this.GoogleFirstName = null;
};
$Inherit(FoodApp.Common.ngUserModel, FoodApp.Common.ngModelBase);
FoodApp.Common.ngFoodFilter = function (){
};
FoodApp.Common.ngFoodFilter.prototype.get_className = function (){
    return "ngFoodFilter";
};
FoodApp.Common.ngFoodFilter.prototype.get_namespace = function (){
    return "FoodApp.Common";
};
FoodApp.Common.ngFoodFilter.prototype.get_filterName = function (){
    return "foodFilter";
};
angularUtils.inst.registerFilterType(new FoodApp.Common.ngFoodFilter());
FoodApp.Common.ngFoodFilter.prototype.filter = function (obj, arg){
    var res =  [];
    var category = arg["category"];
    var day = arg["day"];
    var allFoods = obj;
    var items = allFoods[day];
    if (null != items){
        for (var $i4 = 0,$l4 = items.length,item = items[$i4]; $i4 < $l4; $i4++, item = items[$i4]){
            if ((item.Category == category) && !item.isContainer){
                res.push(item);
            }
        }
    }
    return res;
};
FoodApp.Common.ajaxHlp = function (){
};
FoodApp.Common.ajaxHlp.inst = new FoodApp.Common.ajaxHlp();
FoodApp.Common.ajaxHlp.prototype.SendGet = function (type, url, success, failed){
    url = FoodApp.Common.ajaxHlp.addTimeToUrl(url);
    var headers = new Object();
    $.ajax({
        type: "GET",
        dataType: type,
        url: FoodApp.Common.jsUtils.inst.getLocation() + "/" + url,
        headers: headers,
        success: $CreateAnonymousDelegate(this, function (o, s, arg3){
            success(o, s, arg3);
        }),
        error: $CreateAnonymousDelegate(this, function (xhr, s, arg3){
            failed(arg3, s, xhr);
        })
    });
};
FoodApp.Common.ajaxHlp.prototype.SendPost = function (dataType, url, data, success, failed){
    this.SendInternal("post", dataType, url, data, success, failed);
};
FoodApp.Common.ajaxHlp.prototype.SendPut = function (dataType, url, data, success, failed){
    this.SendInternal("put", dataType, url, data, success, failed);
};
FoodApp.Common.ajaxHlp.prototype.SendDelete = function (dataType, url, data, success, failed){
    this.SendInternal("delete", dataType, url, data, success, failed);
};
FoodApp.Common.ajaxHlp.prototype.SendInternal = function (httpMethod, type, url, data, success, failed){
    url = FoodApp.Common.ajaxHlp.addTimeToUrl(url);
    var headers = new Object();
    var ajaxSettings = {
        type: httpMethod,
        dataType: type,
        data: data,
        url: FoodApp.Common.jsUtils.inst.getLocation() + "/" + url,
        headers: headers,
        success: $CreateAnonymousDelegate(this, function (o, s, arg3){
            success(o, s, arg3);
        }),
        error: $CreateAnonymousDelegate(this, function (xhr, s, arg3){
            failed(arg3, s, xhr);
        })
    };
    var isString = data["toLowerCase"] != null;
    if (isString){
        ajaxSettings.processData = true;
        ajaxSettings.contentType = (type.toLowerCase() == "xml") ? "application/xml" : "application/json";
    }
    $.ajax(ajaxSettings);
};
FoodApp.Common.ajaxHlp.addTimeToUrl = function (url){
    if (-1 == url.indexOf("?")){
        url += "?time=" + (new Date()).getTime();
    }
    else {
        url += "&time=" + (new Date()).getTime();
    }
    return url;
};
FoodApp.Common.UrlBase = function (){
};
FoodApp.Common.UrlBase.prototype.FormatUrl = function (str, tmpArgs){
    if (FoodApp.Common.UrlBase.IsJavaScriptExecute()){
        var lArguments = arguments;
        var len = lArguments.length;
        var regExp = new RegExp("{\\w+}");
        for (var i = 1; i < len; ++i){
            var arg = lArguments[i];
            str = str.replace(regExp, arg);
        }
    }
    else {
        str = FoodApp.Common.UrlBase.FormatUrlInternal(str, tmpArgs);
    }
    return str;
};
FoodApp.Common.UrlBase.IsJavaScriptExecute = function (){
    return window != null && window.location != null && window.location.href != null;
};
FoodApp.Common.FoodsUrl = function (){
    FoodApp.Common.UrlBase.call(this);
};
FoodApp.Common.FoodsUrl.Inst = new FoodApp.Common.FoodsUrl();
FoodApp.Common.FoodsUrl.c_sFoodsPrefix = "api/foods";
FoodApp.Common.FoodsUrl.c_sAllFoods = "api/foods/";
FoodApp.Common.FoodsUrl.c_sGetFoodsByDay = "api/foods/{userId}/{day}/";
FoodApp.Common.FoodsUrl.c_sBuy = "api/foods/{userId}/{day}/{foodId}/{val}/";
FoodApp.Common.FoodsUrl.c_sChangePricePrefix = "api/foods/changeprice/";
FoodApp.Common.FoodsUrl.c_sChangePrice = "api/foods/changeprice/{userId}/{day}/{foodId}/{val}/";
FoodApp.Common.FoodsUrl.prototype.GetFoodsByDayUrl = function (userId, day){
    var res = this.FormatUrl("api/foods/{userId}/{day}/", userId, day);
    return res;
};
FoodApp.Common.FoodsUrl.prototype.GetAllFoodsUrl = function (userId){
    var res = this.FormatUrl("api/foods/", userId);
    return res;
};
FoodApp.Common.FoodsUrl.prototype.GetBuyUrl = function (userId, day, foodId, value){
    var res = this.FormatUrl("api/foods/{userId}/{day}/{foodId}/{val}/", userId, day, foodId, value);
    return res;
};
FoodApp.Common.FoodsUrl.prototype.GetChangePriceUrl = function (userId, day, foodId, value){
    var res = this.FormatUrl("api/foods/changeprice/{userId}/{day}/{foodId}/{val}/", userId, day, foodId, value);
    return res;
};
$Inherit(FoodApp.Common.FoodsUrl, FoodApp.Common.UrlBase);
FoodApp.Common.HistoryUrl = function (){
    FoodApp.Common.UrlBase.call(this);
};
FoodApp.Common.HistoryUrl.c_sHistoryPrefix = "api/history";
FoodApp.Common.HistoryUrl.c_sGetHistory = "api/history/{userId}/";
FoodApp.Common.HistoryUrl.c_sDeleteHistoryPrefix = "api/history/delete";
FoodApp.Common.HistoryUrl.c_sDeleteHistory = "api/history/delete/{userId}/";
$Inherit(FoodApp.Common.HistoryUrl, FoodApp.Common.UrlBase);
FoodApp.Common.JsApiBase = function (serverUrl, userId){
    this._userId = null;
    this._serverUrl = null;
    this._serverUrl = serverUrl;
    this._userId = userId;
};
FoodApp.Common.JsApiBase.prototype.Deserealize = function (obj){
    var res = obj;
    if (FoodApp.Common.jsCommonUtils.inst.IsArray(obj)){
        FoodApp.Common.jsCommonUtils.inst.Assert(null != res);
    }
    else {
        FoodApp.Common.jsCommonUtils.inst.Assert(null != res);
    }
    return res;
};
FoodApp.Common.JsApiBase.prototype.GetPrefixFromArray = function (args){
    var prefix = null;
    for (var $i5 = 0,$l5 = args.length,arg = args[$i5]; $i5 < $l5; $i5++, arg = args[$i5]){
        prefix = this.GetPrefixFromObject(arg);
    }
    return prefix;
};
FoodApp.Common.JsApiBase.prototype.GetPrefixFromObject = function (arg){
    var prefix = null;
    for (var prop in arg){
        if (FoodApp.Common.jsCommonUtils.inst.HasPrefix(prop)){
            prefix = FoodApp.Common.jsCommonUtils.inst.GetPrefix(prop);
            break;
        }
    }
    return prefix;
};
FoodApp.Common.JsApiBase.prototype.SendGet = function (url, handler, args){
    var serverUrl = this._serverUrl;
    url = FoodApp.Common.jsCommonUtils.inst.appendQueryToUrl(serverUrl + url, "time=" + new Date().getTime());
    var headers = new Object();
    $.ajax({
        type: "GET",
        dataType: "json",
        url: url,
        async: true,
        headers: headers,
        success: $CreateAnonymousDelegate(this, function (o, s, arg3){
            handler(o);
        }),
        error: $CreateAnonymousDelegate(this, function (xhr, s, arg3){
            alert(arg3);
        })
    });
};
FoodApp.Common.JsApiBase.prototype.SendPost = function (url, data, handler){
    this.SendInternal("post", url, data, handler);
};
FoodApp.Common.JsApiBase.prototype.SendInternal = function (httpMethod, url, data, handler){
    var serverUrl = this._serverUrl;
    url = FoodApp.Common.jsCommonUtils.inst.appendQueryToUrl(serverUrl + url, "time=" + new Date().getTime());
    var headers = new Object();
    var ajaxSettings = {
        type: httpMethod,
        dataType: "json",
        data: data,
        url: url,
        headers: headers,
        success: $CreateAnonymousDelegate(this, function (o, s, arg3){
            handler(o);
        }),
        error: $CreateAnonymousDelegate(this, function (xhr, s, arg3){
            alert(arg3);
        })
    };
    $.ajax(ajaxSettings);
};
FoodApp.Common.jsCommonUtils = function (){
    this._location = null;
};
FoodApp.Common.jsCommonUtils.inst = new FoodApp.Common.jsCommonUtils();
FoodApp.Common.jsCommonUtils.prototype.Equals = function (prefix, prefix2){
    var res = prefix.toLowerCase() == prefix2.toLowerCase();
    return res;
};
FoodApp.Common.jsCommonUtils.prototype.Assert = function (p1){
    this.Assert(p1, "");
};
FoodApp.Common.jsCommonUtils.prototype.Assert = function (p1, msg){
    if (!p1){
        if (msg == null){
            msg = "";
        }
        if (confirm(msg + "Debug?")){
            debugger;
        }
    }
};
FoodApp.Common.jsCommonUtils.prototype.isEmpty = function (prefix){
    var res = prefix == null || prefix == "" && prefix == undefined || prefix == 0;
    return res;
};
FoodApp.Common.jsCommonUtils.prototype.GetPrefix = function (prop){
    var prefix = "";
    var idx = prop.indexOf(".");
    if (-1 != idx){
        prefix = prop.substr(0, idx + 1);
    }
    return prefix;
};
FoodApp.Common.jsCommonUtils.prototype.HasPrefix = function (prop){
    var res = false;
    var idx = prop.indexOf(".");
    if (-1 != idx){
        res = true;
    }
    return res;
};
FoodApp.Common.jsCommonUtils.prototype.IsArray = function (obj){
    var res = false;
    var arr = obj;
    if (null != arr && arr["pop"] != null){
        res = true;
    }
    return res;
};
FoodApp.Common.jsCommonUtils.prototype.appendQueryToUrl = function (url, queryStr){
    var res = url;
    if (queryStr != ""){
        if (url.indexOf("?") == -1){
            res = url + "?" + queryStr;
        }
        else {
            res = url + "&" + queryStr;
        }
    }
    return res;
};
FoodApp.Common.jsCommonUtils.prototype.isEmpty = function (str){
    return (null == str) || (undefined == str) || ("" == str) || ("null" == str);
};
FoodApp.Common.jsCommonUtils.prototype.toBool = function (jsString){
    var res = false;
    if (!FoodApp.Common.jsCommonUtils.inst.isEmpty(jsString)){
        if (jsString == "true" || jsString == 1 || jsString){
            res = true;
        }
    }
    return res;
};
FoodApp.Common.jsCommonUtils.prototype.contains = function (prefixes, prefix){
    var res = false;
    for (var $i6 = 0,$l6 = prefixes.length,pr = prefixes[$i6]; $i6 < $l6; $i6++, pr = prefixes[$i6]){
        if (pr == prefix){
            res = true;
            break;
        }
    }
    return res;
};
FoodApp.Common.jsCommonUtils.prototype.getQueryParam = function (jsString, p){
    var res = "";
    var idx = jsString.indexOf("?");
    if (idx > 0){
        var tmp = jsString.substr(idx + 1);
        var args = tmp.split("&");
        if (args.length == 0){
            args.push(tmp);
        }
        for (var $i7 = 0,$l7 = args.length,arg = args[$i7]; $i7 < $l7; $i7++, arg = args[$i7]){
            var keyVal = arg.split("=");
            if (keyVal.length == 2){
                if (keyVal[0] == p){
                    res = keyVal[1];
                    break;
                }
            }
        }
    }
    return res;
};
FoodApp.Common.jsCommonUtils.prototype.getLocation = function (){
    var res = this._location;
    if (FoodApp.Common.jsCommonUtils.inst.isEmpty(this._location)){
        res = document.location.protocol + "//" + document.location.host + "/";
    }
    return res;
};
FoodApp.Common.jsCommonUtils.prototype.getPrefix = function (tmp){
    var idx = tmp.indexOf(".");
    var prefix = tmp.substr(0, idx + 1);
    return prefix;
};
FoodApp.Common.jsCommonUtils.prototype.removeFromArray = function (items, obj){
    var tmpArray =  [];
    for (var $i8 = 0,$l8 = items.length,tmp = items[$i8]; $i8 < $l8; $i8++, tmp = items[$i8]){
        if (tmp != obj){
            tmpArray.push(tmp);
        }
    }
    while (items.length > 0){
        items.pop();
    }
    for (var $i9 = 0,$l9 = tmpArray.length,tmp = tmpArray[$i9]; $i9 < $l9; $i9++, tmp = tmpArray[$i9]){
        items.push(tmp);
    }
};
FoodApp.Common.JsFoodApi = function (serverUrl, userId){
    FoodApp.Common.JsApiBase.call(this, serverUrl, userId);
};
FoodApp.Common.JsFoodApi.prototype.GetFoods = function (day, handler){
    var url = FoodApp.Common.FoodsUrl.Inst.GetFoodsByDayUrl(this._userId, day);
    this.SendGet(url, $CreateAnonymousDelegate(this, function (args){
        var res = this.Deserealize(args);
        FoodApp.Common.jsCommonUtils.inst.Assert(null != res);
        if (null != handler){
            handler(res);
        }
    }));
};
FoodApp.Common.JsFoodApi.prototype.GetAllFoods = function (handler){
    var url = FoodApp.Common.FoodsUrl.Inst.GetAllFoodsUrl(this._userId);
    this.SendGet(url, $CreateAnonymousDelegate(this, function (args){
        var res = this.Deserealize(args);
        FoodApp.Common.jsCommonUtils.inst.Assert(null != res);
        if (null != handler){
            handler(res);
        }
    }));
};
FoodApp.Common.JsFoodApi.prototype.Buy = function (day, foodId, value, handler){
    var url = FoodApp.Common.FoodsUrl.Inst.GetBuyUrl(this._userId, day, foodId, value);
    this.SendPost(url, new Object(), $CreateAnonymousDelegate(this, function (args){
        var res = this.Deserealize(args);
        FoodApp.Common.jsCommonUtils.inst.Assert(null != res);
        if (null != handler){
            handler(res);
        }
    }));
};
FoodApp.Common.JsFoodApi.prototype.ChangePrice = function (day, foodId, value, handler){
    var url = FoodApp.Common.FoodsUrl.Inst.GetChangePriceUrl(this._userId, day, foodId, value);
    this.SendPost(url, new Object(), $CreateAnonymousDelegate(this, function (args){
        var res = this.Deserealize(args);
        FoodApp.Common.jsCommonUtils.inst.Assert(null != res);
        if (null != handler){
            handler(res);
        }
    }));
};
$Inherit(FoodApp.Common.JsFoodApi, FoodApp.Common.JsApiBase);
FoodApp.Common.JsOrderApi = function (serverUrl, userId){
    FoodApp.Common.JsApiBase.call(this, serverUrl, userId);
};
FoodApp.Common.JsOrderApi.prototype.GetOrders = function (handler){
    var url = FoodApp.Common.OrderUrl.Inst.GetAllOrdersUrl(this._userId);
    this.SendGet(url, $CreateAnonymousDelegate(this, function (args){
        var res = this.Deserealize(args);
        FoodApp.Common.jsCommonUtils.inst.Assert(null != res);
        if (null != handler){
            handler(res);
        }
    }));
};
FoodApp.Common.JsOrderApi.prototype.DeleteOrder = function (day, foodId, handler){
    var url = FoodApp.Common.OrderUrl.Inst.GetDeleteOrderUrl(this._userId, day, foodId);
    this.SendGet(url, $CreateAnonymousDelegate(this, function (args){
        var res = this.Deserealize(args);
        FoodApp.Common.jsCommonUtils.inst.Assert(null != res);
        if (null != handler){
            handler(res);
        }
    }));
};
$Inherit(FoodApp.Common.JsOrderApi, FoodApp.Common.JsApiBase);
FoodApp.Common.JsService = function (){
    this.FoodApi = null;
    this.OrderApi = null;
};
FoodApp.Common.JsService.Inst = new FoodApp.Common.JsService();
FoodApp.Common.JsService.prototype.Init = function (serverUrl, userId){
    this.FoodApi = new FoodApp.Common.JsFoodApi(serverUrl, userId);
    this.OrderApi = new FoodApp.Common.JsOrderApi(serverUrl, userId);
};
FoodApp.Common.OrderUrl = function (){
    FoodApp.Common.UrlBase.call(this);
};
FoodApp.Common.OrderUrl.c_sOrdersPrefix = "api/orders";
FoodApp.Common.OrderUrl.c_sGetAllOrders = "api/orders/{userId}/";
FoodApp.Common.OrderUrl.c_sGetOrdersByDay = "api/orders/{userId}/{day}";
FoodApp.Common.OrderUrl.c_sDeleteOrder = "api/orders/{userId}/{day}/{foodId}/";
FoodApp.Common.OrderUrl.Inst = new FoodApp.Common.OrderUrl();
FoodApp.Common.OrderUrl.prototype.GetAllOrdersUrl = function (ngUserId){
    return this.FormatUrl("api/orders/{userId}/", ngUserId);
};
FoodApp.Common.OrderUrl.prototype.GetOrdersByDayUrl = function (ngUserId, day){
    return this.FormatUrl("api/orders/{userId}/{day}", ngUserId, day);
};
FoodApp.Common.OrderUrl.prototype.GetDeleteOrderUrl = function (ngUserId, day, foodId){
    return this.FormatUrl("api/orders/{userId}/{day}/{foodId}/", ngUserId, day, foodId);
};
$Inherit(FoodApp.Common.OrderUrl, FoodApp.Common.UrlBase);
FoodApp.Common.PropousalUrl = function (){
};
FoodApp.Common.PropousalUrl.c_sGetPropousal = "api/propousal";
FoodApp.Common.PropousalUrl.c_sGetPropousalByDay = "api/propousal/{userId}/{dayOfWeek}/";
FoodApp.Common.PropousalUrl.c_sGetPropousals = "api/propousal/{userId}/";
FoodApp.Common.PropousalUrl.c_sBuy = "api/propousal/{userId}/{dayOfWeek}/";


if (typeof(MobileWebApp) == "undefined")
    var MobileWebApp = {};
if (typeof(MobileWebApp.Common) == "undefined")
    MobileWebApp.Common = {};
if (typeof(MobileWebApp.Common.client) == "undefined")
    MobileWebApp.Common.client = {};
MobileWebApp.Common.client.ngMobileControllerBase = function (){
    angularjs.angularController.call(this);
};
MobileWebApp.Common.client.ngMobileControllerBase.prototype.get_className = function (){
    return "ngMobileControllerBase";
};
MobileWebApp.Common.client.ngMobileControllerBase.prototype.get_namespace = function (){
    return "MobileWebApp.Common.client";
};
MobileWebApp.Common.client.ngMobileControllerBase.prototype.init = function (scope, http, loc, filter){
    angularjs.angularController.prototype.init.call(this, scope, http, loc, filter);
};
MobileWebApp.Common.client.ngMobileControllerBase.prototype.onRequestSuccess = function (o, s, arg3){
};
MobileWebApp.Common.client.ngMobileControllerBase.prototype.onRequestFailed = function (jsError, jsString, arg3){
};
$Inherit(MobileWebApp.Common.client.ngMobileControllerBase, angularjs.angularController);
MobileWebApp.Common.client.ngMobileAppController = function (){
    MobileWebApp.Common.client.ngMobileControllerBase.call(this);
};
MobileWebApp.Common.client.ngMobileAppController.inst = new MobileWebApp.Common.client.ngMobileAppController();
MobileWebApp.Common.client.ngMobileAppController.prototype.get_className = function (){
    return "ngMobileAppController";
};
MobileWebApp.Common.client.ngMobileAppController.prototype.get_ngUserId = function (){
    return this._scope["ngUserId"];
};
MobileWebApp.Common.client.ngMobileAppController.prototype.set_ngUserId = function (value){
    this._scope["ngUserId"] = value;
};
MobileWebApp.Common.client.ngMobileAppController.prototype.init = function (scope, http, loc, filter){
    MobileWebApp.Common.client.ngMobileControllerBase.prototype.init.call(this, scope, http, loc, filter);
    this.set_ngUserId(document.getElementById("userId").value);
    FoodApp.Common.JsService.Inst.Init("http://www.gam-gam.lviv.ua/", this.get_ngUserId());
    window.setTimeout($CreateAnonymousDelegate(this, function (){
        FoodApp.Common.eventManager.inst.fire(FoodApp.Common.eventManager.settingsLoaded, "");
    }), 1);
};
$Inherit(MobileWebApp.Common.client.ngMobileAppController, MobileWebApp.Common.client.ngMobileControllerBase);
MobileWebApp.Common.client.ngMobileFoodController = function (){
    MobileWebApp.Common.client.ngMobileControllerBase.call(this);
};
MobileWebApp.Common.client.ngMobileFoodController.inst = new MobileWebApp.Common.client.ngMobileFoodController();
MobileWebApp.Common.client.ngMobileFoodController.prototype.get_className = function (){
    return "ngMobileFoodController";
};
MobileWebApp.Common.client.ngMobileFoodController.prototype.get_ngFoods = function (){
    return this._scope["ngFoods"];
};
MobileWebApp.Common.client.ngMobileFoodController.prototype.set_ngFoods = function (value){
    this._scope["ngFoods"] = value;
};
MobileWebApp.Common.client.ngMobileFoodController.prototype.get_ngCategories = function (){
    return this._scope["ngCategories"];
};
MobileWebApp.Common.client.ngMobileFoodController.prototype.set_ngCategories = function (value){
    this._scope["ngCategories"] = value;
};
MobileWebApp.Common.client.ngMobileFoodController.prototype.buyClick = function (day, foodId, value){
    FoodApp.Common.jsUtils.inst.showLoading();
    FoodApp.Common.JsService.Inst.FoodApi.Buy(day, foodId, value, $CreateAnonymousDelegate(this, function (){
        FoodApp.Common.jsUtils.inst.hideLoading();
        MobileWebApp.Common.client.ngMobileOrderController.inst.refreshOrders();
    }));
};
MobileWebApp.Common.client.ngMobileFoodController.prototype.hasOrder = function (day, foodId){
    var res = false;
    var order = MobileWebApp.Common.client.ngMobileOrderController.inst.getOrderByFoodId(day, foodId);
    if (null != order){
        res = true;
    }
    return res;
};
MobileWebApp.Common.client.ngMobileFoodController.prototype.init = function (scope, http, loc, filter){
    MobileWebApp.Common.client.ngMobileControllerBase.prototype.init.call(this, scope, http, loc, filter);
    this.set_ngFoods( []);
    this.set_ngCategories( []);
    this.get_ngCategories().push("Салати");
    this.get_ngCategories().push("Перші страви");
    this.get_ngCategories().push("Гарніри");
    this.get_ngCategories().push("Мясо/Риба");
    this.get_ngCategories().push("Комплексний");
    this.get_ngCategories().push("Хліб");
    FoodApp.Common.eventManager.inst.subscribe(FoodApp.Common.eventManager.deviceReady, $CreateAnonymousDelegate(this, function (n){
        this.refreshFoods($CreateAnonymousDelegate(this, function (){
        }));
    }));
    FoodApp.Common.eventManager.inst.subscribe(FoodApp.Common.eventManager.orderListChanged, $CreateAnonymousDelegate(this, function (n){
        this._scope.$apply();
    }));
};
MobileWebApp.Common.client.ngMobileFoodController.prototype.getPrefix = function (price){
    var res = price;
    if (res.indexOf(".") > 0){
        res = res.substr(0, res.indexOf("."));
    }
    return res;
};
MobileWebApp.Common.client.ngMobileFoodController.prototype.getSuffix = function (price){
    var res = price;
    if (res.indexOf(".") > 0){
        res = res.substr(res.indexOf(".") + 1);
    }
    else {
        res = "";
    }
    return res;
};
MobileWebApp.Common.client.ngMobileFoodController.prototype.refreshFoods = function (complete){
    FoodApp.Common.JsService.Inst.FoodApi.GetAllFoods($CreateAnonymousDelegate(this, function (data){
        this.set_ngFoods(data);
        this._scope.$apply();
        if (null != complete){
            complete();
        }
    }));
};
MobileWebApp.Common.client.ngMobileFoodController.prototype.findFoodById = function (id){
    var res = null;
    for (var $i2 = 0,$t2 = this.get_ngFoods(),$l2 = $t2.length,dayItems = $t2[$i2]; $i2 < $l2; $i2++, dayItems = $t2[$i2]){
        for (var $i3 = 0,$l3 = dayItems.length,item = dayItems[$i3]; $i3 < $l3; $i3++, item = dayItems[$i3]){
            if (item.FoodId == id){
                res = item;
                break;
            }
        }
        if (null != res){
            break;
        }
    }
    return res;
};
MobileWebApp.Common.client.ngMobileFoodController.prototype.getOrderCount = function (day, foodId){
    var res = 0;
    var order = MobileWebApp.Common.client.ngMobileOrderController.inst.getOrderByFoodId(day, foodId);
    if (null != order){
        res = order.Count;
    }
    return res;
};
MobileWebApp.Common.client.ngMobileFoodController.prototype.changePrice = function (day, ngFoodItem){
    FoodApp.Common.jsUtils.inst.showLoading();
    FoodApp.Common.JsService.Inst.FoodApi.ChangePrice(day, ngFoodItem.FoodId, ngFoodItem.Price, $CreateAnonymousDelegate(this, function (data){
        FoodApp.Common.jsUtils.inst.hideLoading();
        this.refreshFoods($CreateAnonymousDelegate(this, function (){
        }));
    }));
};
$Inherit(MobileWebApp.Common.client.ngMobileFoodController, MobileWebApp.Common.client.ngMobileControllerBase);
MobileWebApp.Common.client.ngMobileOrderController = function (){
    MobileWebApp.Common.client.ngMobileControllerBase.call(this);
};
MobileWebApp.Common.client.ngMobileOrderController.inst = new MobileWebApp.Common.client.ngMobileOrderController();
MobileWebApp.Common.client.ngMobileOrderController.prototype.get_className = function (){
    return "ngMobileOrderController";
};
MobileWebApp.Common.client.ngMobileOrderController.prototype.get_ngOrderEntries = function (){
    return this._scope["ngOrderEntries"];
};
MobileWebApp.Common.client.ngMobileOrderController.prototype.set_ngOrderEntries = function (value){
    this._scope["ngOrderEntries"] = value;
};
MobileWebApp.Common.client.ngMobileOrderController.prototype.getFoodItem = function (id){
    var item = MobileWebApp.Common.client.ngMobileFoodController.inst.findFoodById(id);
    return item;
};
MobileWebApp.Common.client.ngMobileOrderController.prototype.formatCount = function (order){
    var res = order.Count + "";
    var food = this.getFoodItem(order.FoodId);
    if (food.IsByWeightItem){
        res = parseInt((order.Count * 100), 10) + "";
    }
    return res;
};
MobileWebApp.Common.client.ngMobileOrderController.prototype.getTotalPrice = function (day){
    var res = 0;
    var ngOrderModels = this.get_ngOrderEntries()[day];
    if (ngOrderModels != null){
        for (var $i4 = 0,$l4 = ngOrderModels.length,item = ngOrderModels[$i4]; $i4 < $l4; $i4++, item = ngOrderModels[$i4]){
            var food = this.getFoodItem(item.FoodId);
            if (null != food){
                res += FoodApp.Common.jsUtils.inst.fixNumber(food.Price * item.Count);
                res = FoodApp.Common.jsUtils.inst.fixNumber(res);
            }
        }
    }
    res = FoodApp.Common.jsUtils.inst.fixNumber(res);
    return res;
};
MobileWebApp.Common.client.ngMobileOrderController.prototype.init = function (scope, http, loc, filter){
    MobileWebApp.Common.client.ngMobileControllerBase.prototype.init.call(this, scope, http, loc, filter);
    this.set_ngOrderEntries( []);
    FoodApp.Common.eventManager.inst.subscribe(FoodApp.Common.eventManager.deviceReady, $CreateAnonymousDelegate(this, function (n){
        this.refreshOrders();
    }));
    FoodApp.Common.eventManager.inst.subscribe(FoodApp.Common.eventManager.orderCompleted, $CreateAnonymousDelegate(this, function (n){
        this.refreshOrders();
    }));
};
MobileWebApp.Common.client.ngMobileOrderController.prototype.deleteOrder = function (day, foodId){
    FoodApp.Common.jsUtils.inst.showLoading();
    FoodApp.Common.JsService.Inst.OrderApi.DeleteOrder(day, foodId, $CreateAnonymousDelegate(this, function (s){
        FoodApp.Common.jsUtils.inst.hideLoading();
        this.refreshOrders();
    }));
};
MobileWebApp.Common.client.ngMobileOrderController.prototype.refreshOrders = function (){
    FoodApp.Common.JsService.Inst.OrderApi.GetOrders($CreateAnonymousDelegate(this, function (tmp){
        while (this.get_ngOrderEntries().length > 0){
            this.get_ngOrderEntries().pop();
        }
        for (var $i5 = 0,$l5 = tmp.length,obj = tmp[$i5]; $i5 < $l5; $i5++, obj = tmp[$i5]){
            this.get_ngOrderEntries().push(obj);
        }
        FoodApp.Common.eventManager.inst.fire(FoodApp.Common.eventManager.orderListChanged, this.get_ngOrderEntries());
        this._scope.$apply();
    }));
};
MobileWebApp.Common.client.ngMobileOrderController.prototype.getOrders = function (day){
    return this.get_ngOrderEntries()[day];
};
MobileWebApp.Common.client.ngMobileOrderController.prototype.getOrderByFoodId = function (day, foodId){
    var res = null;
    var orders = MobileWebApp.Common.client.ngMobileOrderController.inst.getOrders(day);
    for (var $i6 = 0,$l6 = orders.length,order = orders[$i6]; $i6 < $l6; $i6++, order = orders[$i6]){
        if (order.FoodId == foodId){
            res = order;
            break;
        }
    }
    return res;
};
$Inherit(MobileWebApp.Common.client.ngMobileOrderController, MobileWebApp.Common.client.ngMobileControllerBase);
function Main(){
    window.onerror = function (evt){
        alert("error:" + evt);
    };
    window.setTimeout(function (){
        FoodApp.Common.eventManager.inst.fire(FoodApp.Common.eventManager.deviceReady, "");
    }, 1);
};
var isSharp = -1 != window.location.href.indexOf("cshtml");
if (isSharp){
    Main();
}
MobileWebApp.Common.client.ngOrderFilter = function (){
};
MobileWebApp.Common.client.ngOrderFilter.prototype.get_className = function (){
    return "ngOrderFilter";
};
MobileWebApp.Common.client.ngOrderFilter.prototype.get_namespace = function (){
    return "MobileWebApp.Common.client";
};
MobileWebApp.Common.client.ngOrderFilter.prototype.get_filterName = function (){
    return "orderFilter";
};
angularUtils.inst.registerFilterType(new MobileWebApp.Common.client.ngOrderFilter());
MobileWebApp.Common.client.ngOrderFilter.prototype.filter = function (obj, arg){
    var res =  [];
    var day = arg["day"];
    var allOrders = obj;
    var tmp = allOrders[day];
    if (tmp != null && tmp.length > 0){
        for (var $i7 = 0,$l7 = tmp.length,order = tmp[$i7]; $i7 < $l7; $i7++, order = tmp[$i7]){
            var foodItem = MobileWebApp.Common.client.ngMobileFoodController.inst.findFoodById(order.FoodId);
            if (null != foodItem && !foodItem.isContainer){
                res.push(order);
            }
        }
    }
    return res;
};

/* Generated by SharpKit 5 v5.5.0 */

if (typeof(angularjs) == "undefined")
    var angularjs = {};
angularjs.ProgramAfter = function (){
};
angularUtils.inst.after();


